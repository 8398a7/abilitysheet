steps:
- name: 'gcr.io/cloud-builders/docker'
  args: ['pull', 'gcr.io/$PROJECT_ID/abilitysheet-base:latest']
- name: 'gcr.io/cloud-builders/docker'
  args: ['build', '--cache-from', 'gcr.io/$PROJECT_ID/abilitysheet-base:latest', '-t', 'gcr.io/$PROJECT_ID/abilitysheet-base', '.', '-f', 'build/base.Dockerfile']
- name: 'gcr.io/cloud-builders/docker'
  args: ['pull', 'gcr.io/$PROJECT_ID/abilitysheet:latest']
- name: 'gcr.io/cloud-builders/docker'
  args: ['build', '--cache-from', 'gcr.io/$PROJECT_ID/abilitysheet:latest', '-t', 'gcr.io/$PROJECT_ID/abilitysheet:$TAG_NAME', '.', '-f', 'build/Dockerfile']
- name: 'gcr.io/cloud-builders/docker'
  args: ['tag', 'gcr.io/$PROJECT_ID/abilitysheet:$TAG_NAME', 'gcr.io/$PROJECT_ID/abilitysheet:latest']
images:
- 'gcr.io/$PROJECT_ID/abilitysheet-base:latest'
- 'gcr.io/$PROJECT_ID/abilitysheet:latest'
- 'gcr.io/$PROJECT_ID/abilitysheet:$TAG_NAME'
